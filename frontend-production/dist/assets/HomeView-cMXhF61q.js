import{_ as w,o as r,c as a,a as t,b as m,w as v,d as f,e as D,v as I,t as o,f as _,F as h,r as p,g as C,h as x,i as y,u as V}from"./index-CNicAdIR.js";import{a as b}from"./index-D5GkNzM3.js";const B={name:"HomeView",setup(){V();const u=y([]),e=y(""),i=y(""),s=y(null),c=async()=>{try{const n=await b.get("/api/users");u.value=n.data.data,e.value=""}catch(n){e.value="获取用户列表失败，请稍后重试",u.value=[],console.error(n)}},U=async n=>{if(confirm("确定要删除这个用户吗？"))try{await b.delete(`/api/users/${n}`),c()}catch(k){e.value="删除用户失败",console.error(k)}},d=async()=>{if(!i.value){e.value="请输入用户ID";return}try{e.value="";const n=await b.get(`/api/users/${i.value}`);s.value=n.data.data}catch(n){e.value="获取用户数据失败，请检查用户ID是否正确",s.value=null,console.error(n)}},l=()=>{s.value=null,i.value="",e.value=""},g=n=>new Date(n).toLocaleString();return C(()=>{c()}),{users:u,error:e,userId:i,selectedUser:s,getUsers:c,deleteUser:U,getUserById:d,clearSelectedUser:l,formatDate:g}}},S={class:"home"},N={class:"action-buttons"},F={class:"user-search"},H={class:"search-form"},L={key:0,class:"user-detail-card"},M={class:"detail-item"},T={class:"detail-item"},E={class:"detail-item"},R={class:"detail-item"},j={class:"card-actions"},q={key:0},z={class:"user-table"},A={class:"action-buttons"},G=["onClick"],J={key:1,class:"empty-state"},K={key:2,class:"error"};function O(u,e,i,s,c,U){const d=x("router-link");return r(),a("div",S,[e[13]||(e[13]=t("h1",null,"用户管理系统",-1)),e[14]||(e[14]=t("p",null,"欢迎使用用户管理系统",-1)),t("div",N,[t("button",{onClick:e[0]||(e[0]=(...l)=>s.getUsers&&s.getUsers(...l)),class:"btn-primary"},"获取用户列表"),m(d,{to:"/users/create",class:"btn-success"},{default:v(()=>[...e[4]||(e[4]=[f("创建用户",-1)])]),_:1})]),t("div",F,[e[7]||(e[7]=t("h3",null,"获取指定用户数据",-1)),t("div",H,[D(t("input",{type:"number","onUpdate:modelValue":e[1]||(e[1]=l=>s.userId=l),placeholder:"请输入用户ID",min:"1"},null,512),[[I,s.userId]]),t("button",{onClick:e[2]||(e[2]=(...l)=>s.getUserById&&s.getUserById(...l)),class:"btn-info"},"获取用户")]),s.selectedUser?(r(),a("div",L,[e[6]||(e[6]=t("h4",null,"用户详情",-1)),t("div",M,[t("span",null,"ID: "+o(s.selectedUser.id),1)]),t("div",T,[t("span",null,"姓名: "+o(s.selectedUser.name),1)]),t("div",E,[t("span",null,"邮箱: "+o(s.selectedUser.email),1)]),t("div",R,[t("span",null,"创建时间: "+o(s.formatDate(s.selectedUser.created_at)),1)]),t("div",j,[m(d,{to:`/users/${s.selectedUser.id}/edit`,class:"btn-warning"},{default:v(()=>[...e[5]||(e[5]=[f("编辑",-1)])]),_:1},8,["to"]),t("button",{onClick:e[3]||(e[3]=(...l)=>s.clearSelectedUser&&s.clearSelectedUser(...l)),class:"btn-secondary"},"清空")])])):_("",!0)]),s.users.length>0?(r(),a("div",q,[e[11]||(e[11]=t("h2",null,"用户列表",-1)),t("table",z,[e[10]||(e[10]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"姓名"),t("th",null,"邮箱"),t("th",null,"创建时间"),t("th",null,"操作")])],-1)),t("tbody",null,[(r(!0),a(h,null,p(s.users,l=>(r(),a("tr",{key:l.id},[t("td",null,o(l.id),1),t("td",null,o(l.name),1),t("td",null,o(l.email),1),t("td",null,o(s.formatDate(l.created_at)),1),t("td",A,[m(d,{to:`/users/${l.id}`,class:"btn-info"},{default:v(()=>[...e[8]||(e[8]=[f("详情",-1)])]),_:1},8,["to"]),m(d,{to:`/users/${l.id}/edit`,class:"btn-warning"},{default:v(()=>[...e[9]||(e[9]=[f("编辑",-1)])]),_:1},8,["to"]),t("button",{onClick:g=>s.deleteUser(l.id),class:"btn-danger"},"删除",8,G)])]))),128))])])])):s.error?_("",!0):(r(),a("div",J,[...e[12]||(e[12]=[t("p",null,'暂无用户数据，请点击"获取用户列表"按钮加载数据',-1)])])),s.error?(r(),a("div",K,o(s.error),1)):_("",!0)])}const W=w(B,[["render",O]]);export{W as default};
